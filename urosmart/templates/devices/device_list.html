{% extends "base_afterlogin.html" %}
{% block content %}
<div class="container my-5">
  {% if messages %}
            {% for message in messages %}
                <div class="message">{{ message }}</div>
            {% endfor %}
  {% endif %}
  <div class="card shadow">
    <div class="card-header bg-success text-white">
      <h3 class="mb-0">裝置列表</h3>
    </div>
    <div class="card-body">
      <table class="table table-striped table-bordered table-hover">
        <thead class="thead-light">
          <tr>
            <th>Chip ID</th>
            <th>Location</th>
            <th>Threshold</th>
            <th>URL</th>
            <th>status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for device in devices %}
          <tr>
            <td>
              <a href="{% url 'device_detail' chip_id=device.chip_id %}">
                {{ device.chip_id }}
              </a>
            </td>
            <td>{{ device.device_location }}</td>
            <td>{{ device.threshold }}</td>
            <td>{{ device.django_url }}</td>
            <td>{{ device.status}}</td>
            <td>
              <a href="{% url 'device_delete' chip_id=device.chip_id %}" class="btn btn-danger btn-sm">刪除</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}